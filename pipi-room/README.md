# PiPi Room

PiPi Room は、ユーザが作品や記事を投稿し、管理できるプラットフォームです。多様なユーザーロールや権限管理により、コンテンツの公開・非公開設定、編集・削除の操作が可能となっています。

---

## Table of Contents

- [Overview](#overview)
- [開発背景](#開発背景)
- [Features](#features)
  - [Core Pages](#core-pages)
  - [User Roles and Permissions](#user-roles-and-permissions)
  - [Using Technologies](#using-technologies)
- [Latest Updates](#latest-updates)
- [Installation](#installation)
- [Deployment](#deployment)
- [Contributing](#contributing)
- [License](#license)

---

## Overview

PiPi Room は、ユーザが自身のクリエイティブな活動を作品や記事として発信できるプラットフォームです。  
各ユーザは担当ロールに応じた権限を持ち、コンテンツの作成や管理を行います。さらに、Supabase のストレージや最新のフロントエンド／バックエンド技術を活用し、パフォーマンスとユーザビリティを向上させています。

## 開発背景

Pied Piper青山テック愛好会では毎年秋に開催される青山祭において、メンバーが各々作品を制作し、来場者の方に体験していただく展示イベントを行っています。  
その際に作られた作品を保存しているプラットフォームは今まで存在しておらず、作った作品はイベント期間外で使うことができませんでした。  
「考える→作る→体験してもらう→フィードバックを得る」というサイクルを大切にしているため、イベント期間外でもアクセスできてフィードバックをもらえる環境を作ることで、より高い開発モチベーションを得られると考え、このプラットフォームを作成しました。

---

## Features

### Core Pages

- **Top 画面:**  
  ユーザのエントリーポイントとなるランディングページです。

- **Works 画面:**  
  各ユーザが投稿した作品の一覧を表示。  
  - *Public* な作品は誰でも閲覧可能。  
  - *Private* な作品は、`member` 以上のユーザのみ閲覧できます。

- **Article 画面:**  
  作品画面と同様の構成で記事を表示。Markdown によるリッチなコンテンツ表現が可能です。

- **Dashboard 画面:**  
  作品／記事の投稿、編集、管理ができる専用画面。  
  - **admin:** ユーザ管理（削除、ロール変更）。  
  - **manager:** 全ユーザの作品／記事に対する編集・管理、ラベルや使用技術の管理。
  - **member:** Public/Privateな作品や記事を閲覧・投稿できます。(PiedPiperに所属している確認が必要)
  - **general:** Publicな作品や記事の閲覧とコメントができます（投稿はできません）。

- **Profile 画面:**  
  自分のプロフィールを設定するページです。

- **Loading 画面:**  
  データ取得中に表示されるインタラクティブなローディング画面を実装。

### User Roles and Permissions

- **admin:**  
  全ユーザの管理（削除、ロール変更）を担当。

- **manager:**  
  すべてのユーザによる作品／記事の閲覧・編集が可能。  
  ラベルや使用技術の一覧確認、名称変更、削除等の管理を実施。

- **member:**  
  作品／記事の新規投稿が可能。  
  Private なコンテンツの閲覧権限を保有。

- **general:**  
  将来的には、各作品／記事へのコメント投稿機能が提供される予定です。

### Using Technologies

- **フロントエンド:**  
  - **Next.js**

- **バックエンド:**  
  - **Next.js** (API ルートを通じたサーバサイド処理)

- **データベース:**  
  - **Supabase** (PostgreSQL ベースのリアルタイムデータ管理)

- **ORM:**  
  - **Drizzle ORM** (型安全なデータベース操作のために採用)

- **UI:**  
  - **tailwindiwow.css** (ユーティリティファーストな CSS フレームワーク)

- **コンポーネントライブラリ:**  
  - **shadcn** (高品質な UI コンポーネントでデザインの統一を実現)

- **デプロイ:**  
  - **Vercel** (Next.js との親和性が高く、スムーズなデプロイをサポート)

![画像の説明](https://qbjopokpqxzwyiyezzbs.supabase.co/storage/v1/object/public/articles/user_2uaUG0dB7BbPGiB6upHG2hIcfN7/1/pipiRoomTech.png)
---

## Latest Updates

以下の機能が追加または改善され、順次デプロイされています。

- **Supabase Storage を用いた作品アイコンの管理**  
  - 作品のアイコンが Supabase Storage に保存されるようになりました。

- **関連画像の同時削除**  
  - ユーザ、作品、記事の削除時に、関連する画像も自動的に削除されるよう改善されました。

- **管理者の編集・削除権限のバグ修正**  
  - 管理者が全ユーザ作成の作品／記事を編集・削除できない不具合を修正しました。

- **Markdown 表示による記事レンダリング**  
  - 記事表示時に Markdown を正しく読み込み、リッチなコンテンツ表現が可能になりました。

- **記事プレビュー画面での画像表示**  
  - プレビュー画面において記事内の画像が正しく表示されるようになりました。

- **新規記事作成時の articleId 取得不具合の解消**  
  - 新規作成時、プレビューに遷移する際の articleId 未取得問題を修正しました。

- **公開設定 (public/private) の実装**  
  - コンテンツごとに公開設定を行えるようになりました。

- **作品作成時の画像保存問題の修正**  
  - 作品情報入力時に articleId が未設定の場合の画像保存不具合を修正しました。

- **ユーザ取得問題の解消（4/2 デプロイ済）**  
  - デプロイ環境でのユーザ情報取得に関する問題を解決しました。

- **記事／作品のラベルと作成日時による並べ替え＆検索機能**  
  - ラベルや作成日時でのコンテンツの並べ替え、及び検索が可能となりました。

- **Alert から Toast への変更による通知改善（4/9 デプロイ済）**  
  - プロフィール更新や記事更新時の通知が、従来のアラートからスタイリッシュな Toast 表示へ変更されました。

- **記事／作品へのコメント機能の実装（4/9 デプロイ済）**  
  - ユーザが記事や作品に対してコメントを投稿できるようになりました。

- **Top 画面の追加（4/13 デプロイ済）**  
  - 全体のエントリーポイントとして Top 画面が新たに追加され、ユーザのナビゲーション性が向上しました。

---
